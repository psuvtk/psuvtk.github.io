# 锁



## 如何死锁?
1. ABBA
2. 同线程多次调用不可重入锁

## 可重入与不可重入


## 用户态与内核态


## 库函数与锁



## 死锁
### 形成死锁的必要条件
1. 互斥条件
2. 不可剥夺条件
3. 请求与保持条件
4. 循环等待条件

## 如何避免死锁
破坏上述的必要条件
1. 互斥条件 :: 无法破坏, 锁的目的就是互斥
2. 不可剥夺条件 :: 无法获取锁时, 直接失败或者等待超时
3. 请求与保持条件 :: 在加锁前，增加资源池判断资源是否已经在池内 
4. 循环等待条件 :: 保证加锁的顺序




## 参考
1. 深入理解高并发原理

---

> Author: Kristoffer  
> URL: https://psuvtk.github.io/posts/20.-locking/  

