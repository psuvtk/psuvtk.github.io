---
title: "Linux系统RT调度(SCHED_FIFO与SCHED_RR)"
date: 2022-09-12T13:56:47+08:00
lastmod: 
draft: false
tags: ["ftrace", "调度", "SCHED_FIFO", "SCHED_RR"]
categories: "Linux"
keywords: ["ftrace", "调度", "SCHED_FIFO", "SCHED_RR"]
hiddenFromHomePage: false
hiddenFromSearch: false
---

## RT调度与完全公平调度


引入多核的话事情会变得复杂起来，先从简单的场景入手

```sh
#!/bin/bash

echo "" > /sys/kernel/tracing/trace 
echo 1 > /sys/kernel/tracing/events/sched/enable
echo 80920 > /sys/kernel/tracing/buffer_size_kb
echo 1 > /sys/kernel/tracing/tracing_on
./a.out
echo 0 > /sys/kernel/tracing/tracing_on
cat /sys/kernel/tracing/trace  > /root/trace_out
```




4Core@Ubuntu
实验: 创建3个FIFO




```c
stop_task.c	117 DEFINE_SCHED_CLASS(stop)
idle.c	498 DEFINE_SCHED_CLASS(idle)
deadline.c	2696 DEFINE_SCHED_CLASS(dl)
rt.c	2680 DEFINE_SCHED_CLASS(rt)
fair.c	12355 DEFINE_SCHED_CLASS(fair)
```


调度器会放到单独的段里面
```c
#define DEFINE_SCHED_CLASS(name) \
const struct sched_class name##_sched_class \
	__aligned(__alignof__(struct sched_class)) \
	__section("__" #name "_sched_class")
```